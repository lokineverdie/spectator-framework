<?xml version="1.0" encoding="UTF-8"?>
<conversation-flow>
  <metadata>
    <flow-name>{FLOW_NAME}</flow-name>
    <module-name>{MODULE_NAME}</module-name>
    <version>{VERSION}</version>
    <description>{FLOW_DESCRIPTION}</description>
  </metadata>

  <flow-definition>
    <entry-points>
      <entry-point name="{ENTRY_1_NAME}">
        <trigger>{ENTRY_1_TRIGGER}</trigger>
        <conditions>
          <condition>{ENTRY_1_CONDITION_1}</condition>
          <condition>{ENTRY_1_CONDITION_2}</condition>
        </conditions>
        <initial-state>{ENTRY_1_INITIAL_STATE}</initial-state>
      </entry-point>
      
      <entry-point name="{ENTRY_2_NAME}">
        <trigger>{ENTRY_2_TRIGGER}</trigger>
        <conditions>
          <condition>{ENTRY_2_CONDITION_1}</condition>
          <condition>{ENTRY_2_CONDITION_2}</condition>
        </conditions>
        <initial-state>{ENTRY_2_INITIAL_STATE}</initial-state>
      </entry-point>
    </entry-points>

    <conversation-states>
      <state name="{STATE_1_NAME}">
        <description>{STATE_1_DESCRIPTION}</description>
        <context-requirements>
          <requirement>{STATE_1_CONTEXT_REQ_1}</requirement>
          <requirement>{STATE_1_CONTEXT_REQ_2}</requirement>
        </context-requirements>
        <available-actions>
          <action name="{STATE_1_ACTION_1}" target-state="{TARGET_STATE_1}"/>
          <action name="{STATE_1_ACTION_2}" target-state="{TARGET_STATE_2}"/>
          <action name="{STATE_1_ACTION_3}" target-state="{TARGET_STATE_3}"/>
        </available-actions>
        <prompts>
          <prompt type="user-input">{STATE_1_USER_PROMPT}</prompt>
          <prompt type="system-response">{STATE_1_SYSTEM_PROMPT}</prompt>
          <prompt type="clarification">{STATE_1_CLARIFICATION_PROMPT}</prompt>
        </prompts>
      </state>

      <state name="{STATE_2_NAME}">
        <description>{STATE_2_DESCRIPTION}</description>
        <context-requirements>
          <requirement>{STATE_2_CONTEXT_REQ_1}</requirement>
          <requirement>{STATE_2_CONTEXT_REQ_2}</requirement>
        </context-requirements>
        <available-actions>
          <action name="{STATE_2_ACTION_1}" target-state="{TARGET_STATE_1}"/>
          <action name="{STATE_2_ACTION_2}" target-state="{TARGET_STATE_2}"/>
        </available-actions>
        <prompts>
          <prompt type="processing">{STATE_2_PROCESSING_PROMPT}</prompt>
          <prompt type="validation">{STATE_2_VALIDATION_PROMPT}</prompt>
          <prompt type="error-handling">{STATE_2_ERROR_PROMPT}</prompt>
        </prompts>
      </state>

      <state name="{STATE_3_NAME}">
        <description>{STATE_3_DESCRIPTION}</description>
        <context-requirements>
          <requirement>{STATE_3_CONTEXT_REQ_1}</requirement>
        </context-requirements>
        <available-actions>
          <action name="{STATE_3_ACTION_1}" target-state="{TARGET_STATE_1}"/>
          <action name="{STATE_3_ACTION_2}" target-state="END"/>
        </available-actions>
        <prompts>
          <prompt type="completion">{STATE_3_COMPLETION_PROMPT}</prompt>
          <prompt type="summary">{STATE_3_SUMMARY_PROMPT}</prompt>
        </prompts>
      </state>
    </conversation-states>

    <transitions>
      <transition from="{STATE_1_NAME}" to="{STATE_2_NAME}">
        <trigger>{TRANSITION_1_TRIGGER}</trigger>
        <conditions>
          <condition>{TRANSITION_1_CONDITION_1}</condition>
          <condition>{TRANSITION_1_CONDITION_2}</condition>
        </conditions>
        <actions>
          <action>{TRANSITION_1_ACTION_1}</action>
          <action>{TRANSITION_1_ACTION_2}</action>
        </actions>
      </transition>

      <transition from="{STATE_2_NAME}" to="{STATE_3_NAME}">
        <trigger>{TRANSITION_2_TRIGGER}</trigger>
        <conditions>
          <condition>{TRANSITION_2_CONDITION_1}</condition>
        </conditions>
        <actions>
          <action>{TRANSITION_2_ACTION_1}</action>
        </actions>
      </transition>

      <transition from="{STATE_2_NAME}" to="{STATE_1_NAME}">
        <trigger>{TRANSITION_3_TRIGGER}</trigger>
        <conditions>
          <condition>{TRANSITION_3_CONDITION_1}</condition>
        </conditions>
        <actions>
          <action>{TRANSITION_3_ACTION_1}</action>
        </actions>
      </transition>
    </transitions>

    <exit-points>
      <exit-point name="success">
        <conditions>
          <condition>{SUCCESS_CONDITION_1}</condition>
          <condition>{SUCCESS_CONDITION_2}</condition>
        </conditions>
        <final-actions>
          <action>{SUCCESS_ACTION_1}</action>
          <action>{SUCCESS_ACTION_2}</action>
        </final-actions>
        <output-format>{SUCCESS_OUTPUT_FORMAT}</output-format>
      </exit-point>

      <exit-point name="error">
        <conditions>
          <condition>{ERROR_CONDITION_1}</condition>
          <condition>{ERROR_CONDITION_2}</condition>
        </conditions>
        <final-actions>
          <action>{ERROR_ACTION_1}</action>
          <action>{ERROR_ACTION_2}</action>
        </final-actions>
        <output-format>{ERROR_OUTPUT_FORMAT}</output-format>
      </exit-point>

      <exit-point name="timeout">
        <conditions>
          <condition>{TIMEOUT_CONDITION}</condition>
        </conditions>
        <final-actions>
          <action>{TIMEOUT_ACTION}</action>
        </final-actions>
        <output-format>{TIMEOUT_OUTPUT_FORMAT}</output-format>
      </exit-point>
    </exit-points>
  </flow-definition>

  <context-management>
    <context-variables>
      <variable name="{CONTEXT_VAR_1}" type="{VAR_TYPE_1}" scope="{VAR_SCOPE_1}">
        <description>{VAR_1_DESCRIPTION}</description>
        <initialization>{VAR_1_INIT}</initialization>
        <persistence>{VAR_1_PERSISTENCE}</persistence>
      </variable>

      <variable name="{CONTEXT_VAR_2}" type="{VAR_TYPE_2}" scope="{VAR_SCOPE_2}">
        <description>{VAR_2_DESCRIPTION}</description>
        <initialization>{VAR_2_INIT}</initialization>
        <persistence>{VAR_2_PERSISTENCE}</persistence>
      </variable>

      <variable name="{CONTEXT_VAR_3}" type="{VAR_TYPE_3}" scope="{VAR_SCOPE_3}">
        <description>{VAR_3_DESCRIPTION}</description>
        <initialization>{VAR_3_INIT}</initialization>
        <persistence>{VAR_3_PERSISTENCE}</persistence>
      </variable>
    </context-variables>

    <data-collection>
      <collection-point state="{COLLECTION_STATE_1}">
        <data-type>{COLLECTION_DATA_TYPE_1}</data-type>
        <validation>{COLLECTION_VALIDATION_1}</validation>
        <storage>{COLLECTION_STORAGE_1}</storage>
      </collection-point>

      <collection-point state="{COLLECTION_STATE_2}">
        <data-type>{COLLECTION_DATA_TYPE_2}</data-type>
        <validation>{COLLECTION_VALIDATION_2}</validation>
        <storage>{COLLECTION_STORAGE_2}</storage>
      </collection-point>
    </data-collection>

    <context-sharing>
      <shared-context name="{SHARED_CONTEXT_1}">
        <scope>{SHARED_SCOPE_1}</scope>
        <access-pattern>{SHARED_ACCESS_1}</access-pattern>
        <synchronization>{SHARED_SYNC_1}</synchronization>
      </shared-context>

      <shared-context name="{SHARED_CONTEXT_2}">
        <scope>{SHARED_SCOPE_2}</scope>
        <access-pattern>{SHARED_ACCESS_2}</access-pattern>
        <synchronization>{SHARED_SYNC_2}</synchronization>
      </shared-context>
    </context-sharing>
  </context-management>

  <error-handling>
    <error-scenarios>
      <scenario name="{ERROR_SCENARIO_1}">
        <description>{ERROR_1_DESCRIPTION}</description>
        <detection>{ERROR_1_DETECTION}</detection>
        <recovery-strategy>{ERROR_1_RECOVERY}</recovery-strategy>
        <fallback-state>{ERROR_1_FALLBACK}</fallback-state>
      </scenario>

      <scenario name="{ERROR_SCENARIO_2}">
        <description>{ERROR_2_DESCRIPTION}</description>
        <detection>{ERROR_2_DETECTION}</detection>
        <recovery-strategy>{ERROR_2_RECOVERY}</recovery-strategy>
        <fallback-state>{ERROR_2_FALLBACK}</fallback-state>
      </scenario>
    </error-scenarios>

    <recovery-mechanisms>
      <mechanism name="{RECOVERY_MECHANISM_1}">
        <trigger>{RECOVERY_1_TRIGGER}</trigger>
        <actions>
          <action>{RECOVERY_1_ACTION_1}</action>
          <action>{RECOVERY_1_ACTION_2}</action>
        </actions>
        <success-criteria>{RECOVERY_1_SUCCESS}</success-criteria>
      </mechanism>

      <mechanism name="{RECOVERY_MECHANISM_2}">
        <trigger>{RECOVERY_2_TRIGGER}</trigger>
        <actions>
          <action>{RECOVERY_2_ACTION_1}</action>
        </actions>
        <success-criteria>{RECOVERY_2_SUCCESS}</success-criteria>
      </mechanism>
    </recovery-mechanisms>
  </error-handling>
</conversation-flow>